<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: LDAP::Server::Operation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">LDAP::Server::Operation</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/ldap/server/operation_rb.html">
                lib/ldap/server/operation.rb
                </a>
        <br />
                <a href="../../../files/lib/ldap/server/util_rb.html">
                lib/ldap/server/util.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Object to handle a single <a href="../../LDAP.html">LDAP</a> request.
Typically you would subclass this object and override methods &#8216;<a
href="Operation.html#M000135">simple_bind</a>&#8217;, &#8216;search&#8217;
etc. The do_xxx methods are internal, and handle the parsing of requests
and the sending of responses.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000138">add</a>&nbsp;&nbsp;
      <a href="#M000142">anonymous?</a>&nbsp;&nbsp;
      <a href="#M000141">compare</a>&nbsp;&nbsp;
      <a href="#M000139">del</a>&nbsp;&nbsp;
      <a href="#M000144">join_dn</a>&nbsp;&nbsp;
      <a href="#M000121">log</a>&nbsp;&nbsp;
      <a href="#M000122">log_exception</a>&nbsp;&nbsp;
      <a href="#M000137">modify</a>&nbsp;&nbsp;
      <a href="#M000140">modifydn</a>&nbsp;&nbsp;
      <a href="#M000120">new</a>&nbsp;&nbsp;
      <a href="#M000136">search</a>&nbsp;&nbsp;
      <a href="#M000128">send_AddResponse</a>&nbsp;&nbsp;
      <a href="#M000123">send_BindResponse</a>&nbsp;&nbsp;
      <a href="#M000131">send_CompareResponse</a>&nbsp;&nbsp;
      <a href="#M000129">send_DelResponse</a>&nbsp;&nbsp;
      <a href="#M000132">send_ExtendedResponse</a>&nbsp;&nbsp;
      <a href="#M000130">send_ModifyDNResponse</a>&nbsp;&nbsp;
      <a href="#M000127">send_ModifyResponse</a>&nbsp;&nbsp;
      <a href="#M000126">send_SearchResultDone</a>&nbsp;&nbsp;
      <a href="#M000124">send_SearchResultEntry</a>&nbsp;&nbsp;
      <a href="#M000125">send_SearchResultReference</a>&nbsp;&nbsp;
      <a href="#M000134">server_sizelimit</a>&nbsp;&nbsp;
      <a href="#M000133">server_timelimit</a>&nbsp;&nbsp;
      <a href="#M000135">simple_bind</a>&nbsp;&nbsp;
      <a href="#M000143">split_dn</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000144" class="method-detail">
        <a name="M000144"></a>

        <div class="method-heading">
          <a href="Operation.src/M000144.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000144.html');return false;">
          <span class="method-name">join_dn</span><span class="method-args">(elements)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Reverse of <a href="Operation.html#M000143">split_dn</a>. Join
[elements&#8230;] where each element can be {attr=&gt;val,&#8230;} or
[[attr,val],&#8230;] or just [attr,val]
</p>
        </div>
      </div>

      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">
          <a href="Operation.src/M000120.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000120.html');return false;">
          <span class="method-name">new</span><span class="method-args">(connection, messageID)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
An instance of this object is created by the <a
href="Connection.html">Connection</a> object for each operation which is
requested by the client. If you subclass <a
href="Operation.html">Operation</a>, and you override initialize, make sure
you call &#8216;super&#8217;.
</p>
        </div>
      </div>

      <div id="method-M000143" class="method-detail">
        <a name="M000143"></a>

        <div class="method-heading">
          <a href="Operation.src/M000143.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000143.html');return false;">
          <span class="method-name">split_dn</span><span class="method-args">(dn)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Split dn string into its component parts, returning
</p>
<pre>
 [ {attr=&gt;val}, {attr=&gt;val}, ... ]
</pre>
<p>
This is pretty horrible legacy stuff from X500; see RFC2253 for the full
gore. It&#8217;s stupid that the <a href="../../LDAP.html">LDAP</a>
protocol sends the DN in string form, rather than in ASN1 form (as it does
with search filters, for example), even though the DN syntax is defined in
terms of ASN1!
</p>
<p>
Attribute names are downcased, but values are not. For any case-insensitive
attributes it&#8217;s up to you to downcase them.
</p>
<p>
Note that only v2 clients should add extra space around the comma. This is
accepted, and so is semicolon instead of comma, but the full RFC1779
backwards-compatibility rules (e.g. quoted values) are not implemented.
</p>
<p>
I <b>think</b> these functions will work correctly with UTF8-encoded
characters, given that a multibyte UTF8 character does not contain the
bytes 00-7F and therefore we cannot confuse &#8217;\&#8217;,
&#8217;+&#8217; etc
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">
          <a href="Operation.src/M000138.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000138.html');return false;">
          <span class="method-name">add</span><span class="method-args">(dn, av)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle an add request; override this
</p>
<p>
Parameters are the dn of the entry to add, and a hash of
</p>
<pre>
  attr=&gt;[val...]
</pre>
<p>
Raise an exception if there is a problem; it is up to you to check that the
connection has sufficient authorisation using @connection.binddn
</p>
        </div>
      </div>

      <div id="method-M000142" class="method-detail">
        <a name="M000142"></a>

        <div class="method-heading">
          <a href="Operation.src/M000142.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000142.html');return false;">
          <span class="method-name">anonymous?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return true if connection is not authenticated
</p>
        </div>
      </div>

      <div id="method-M000141" class="method-detail">
        <a name="M000141"></a>

        <div class="method-heading">
          <a href="Operation.src/M000141.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000141.html');return false;">
          <span class="method-name">compare</span><span class="method-args">(entry, attr, val)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle a compare request; override this. Return true or false, or raise an
exception for errors.
</p>
        </div>
      </div>

      <div id="method-M000139" class="method-detail">
        <a name="M000139"></a>

        <div class="method-heading">
          <a href="Operation.src/M000139.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000139.html');return false;">
          <span class="method-name">del</span><span class="method-args">(dn)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle a del request; override this
</p>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="Operation.src/M000121.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000121.html');return false;">
          <span class="method-name">log</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Send a log message
</p>
        </div>
      </div>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="Operation.src/M000122.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000122.html');return false;">
          <span class="method-name">log_exception</span><span class="method-args">(e)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Send an exception report to the log
</p>
        </div>
      </div>

      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">
          <a href="Operation.src/M000137.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000137.html');return false;">
          <span class="method-name">modify</span><span class="method-args">(dn, modification)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle a modify request; override this
</p>
<p>
dn is the object to modify; modification is a hash of
</p>
<pre>
  attr =&gt; [:add, val, val...]       -- add operation
  attr =&gt; [:replace, val, val...]   -- replace operation
  attr =&gt; [:delete, val, val...]    -- delete these values
  attr =&gt; [:delete]                 -- delete all values
</pre>
        </div>
      </div>

      <div id="method-M000140" class="method-detail">
        <a name="M000140"></a>

        <div class="method-heading">
          <a href="Operation.src/M000140.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000140.html');return false;">
          <span class="method-name">modifydn</span><span class="method-args">(entry, newrdn, deleteoldrdn, newSuperior)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle a modifydn request; override this
</p>
        </div>
      </div>

      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">
          <a href="Operation.src/M000136.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000136.html');return false;">
          <span class="method-name">search</span><span class="method-args">(basedn, scope, deref, filter, attrs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle a search request; override this.
</p>
<p>
Call <a href="Operation.html#M000124">send_SearchResultEntry</a> for each
result found. Raise an exception if there is a problem. timeLimit,
sizeLimit and typesOnly are taken care of, but you need to perform all
authorisation checks yourself, using @connection.binddn
</p>
        </div>
      </div>

      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">
          <a href="Operation.src/M000128.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000128.html');return false;">
          <span class="method-name">send_AddResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="Operation.src/M000123.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000123.html');return false;">
          <span class="method-name">send_BindResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">
          <a href="Operation.src/M000131.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000131.html');return false;">
          <span class="method-name">send_CompareResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000129" class="method-detail">
        <a name="M000129"></a>

        <div class="method-heading">
          <a href="Operation.src/M000129.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000129.html');return false;">
          <span class="method-name">send_DelResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">
          <a href="Operation.src/M000132.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000132.html');return false;">
          <span class="method-name">send_ExtendedResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">
          <a href="Operation.src/M000130.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000130.html');return false;">
          <span class="method-name">send_ModifyDNResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">
          <a href="Operation.src/M000127.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000127.html');return false;">
          <span class="method-name">send_ModifyResponse</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000126" class="method-detail">
        <a name="M000126"></a>

        <div class="method-heading">
          <a href="Operation.src/M000126.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000126.html');return false;">
          <span class="method-name">send_SearchResultDone</span><span class="method-args">(resultCode, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">
          <a href="Operation.src/M000124.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000124.html');return false;">
          <span class="method-name">send_SearchResultEntry</span><span class="method-args">(dn, avs, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Send a found entry. Avs are {attr1=&gt;val1, attr2=&gt;[val2,val3]} If
schema given, return operational attributes only if explicitly requested
</p>
        </div>
      </div>

      <div id="method-M000125" class="method-detail">
        <a name="M000125"></a>

        <div class="method-heading">
          <a href="Operation.src/M000125.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000125.html');return false;">
          <span class="method-name">send_SearchResultReference</span><span class="method-args">(urls, opt={})</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">
          <a href="Operation.src/M000134.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000134.html');return false;">
          <span class="method-name">server_sizelimit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="../Server.html">Server</a>-set maximum size limit. Override for
more complex behaviour (e.g. limit depends on @connection.binddn). Return
nil for unlimited.
</p>
        </div>
      </div>

      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">
          <a href="Operation.src/M000133.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000133.html');return false;">
          <span class="method-name">server_timelimit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="../Server.html">Server</a>-set maximum time limit. Override for
more complex behaviour (e.g. limit depends on @connection.binddn). Nil uses
hardcoded default.
</p>
        </div>
      </div>

      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">
          <a href="Operation.src/M000135.html" target="Code" class="method-signature"
            onclick="popupCode('Operation.src/M000135.html');return false;">
          <span class="method-name">simple_bind</span><span class="method-args">(version, dn, password)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Handle a simple bind request; raise an exception if the bind is not
acceptable, otherwise just return to accept the bind.
</p>
<p>
Override this method in your own subclass.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>